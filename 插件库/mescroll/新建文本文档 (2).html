<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mescroll.js@1.4.1/mescroll.min.css">
</head>
<style>
  * {
    margin: 0;
    padding: 0;
  }

  html,
  body {
    height: 100%;
  }

  .box {
    height: 100%;
  }

  .mescroll {
    position: fixed;
    top: 100px;
    bottom: 0px;
    height: auto;
    /*如设置bottom:50px,则需height:auto才能生效*/
  }

  header {
    height: 100px;
    background-color: black;
  }

  li {
    height: 100px;
  }

  .mescroll-hardware {
    line-height: 30px;
    border-top: 1px solid #cccccc;
    box-sizing: border-box;
    padding: 10px 0px;
  }

  .more {
  width: 100%;
  border-top: 1px solid #ccc;
  height: 100px;
  padding: 20px 0px;
  line-height: 60px;
  box-sizing: border-box;
  text-align: center;
  font-size: 13px;
  color: #666;
  font-weight: normal;
}

  .loading::before {
  content: '';
  width: 30px;
  height: 30px;
  display: inline-block;
  vertical-align: middle;
  animation: loading 1s steps(12) infinite;
  background: transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgxMDB2MTAwSDB6Ii8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjRTlFOUU5IiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgLTMwKSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iIzk4OTY5NyIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgzMCAxMDUuOTggNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjOUI5OTlBIiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKDYwIDc1Ljk4IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0EzQTFBMiIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSg5MCA2NSA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNBQkE5QUEiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoMTIwIDU4LjY2IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0IyQjJCMiIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgxNTAgNTQuMDIgNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjQkFCOEI5IiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKDE4MCA1MCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNDMkMwQzEiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTE1MCA0NS45OCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNDQkNCQ0IiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTEyMCA0MS4zNCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNEMkQyRDIiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDM1IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0RBREFEQSIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgtNjAgMjQuMDIgNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjRTJFMkUyIiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKC0zMCAtNS45OCA2NSkiLz48L3N2Zz4=) no-repeat;
  background-size: 100%;
}

@keyframes loading {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(360deg);
  }
}
.dog {
  width: 50px;
  height: 50px;
  border-radius: 50%;
}
.tiger {
  width: 30px;
  height: 30px;
  border-radius: 50%;
}
</style>

<body>

  <div class="box">
    <header>这是一个头部</header>
    <div id="mescroll" class="mescroll">
      <ul>
        <script type="text/html" id="test">
          头部：{{ KEY }}
          {{ each list }}
          <li>{{ $index }}:{{ $value.data }}</li>
          {{ /each }}
        </script>
      </ul>
    </div>
  </div>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mescroll.js@1.4.1/mescroll.min.js" charset="utf-8"></script>
<script src="./node_modules/mockjs/dist/mock-min.js"></script>
<script src="./node_modules/art-template/lib/template-web.js"></script>
<!-- 注意： .map文件是解决引入的压缩的JS调试问题 -->
<script>
  // 模拟数据
  let ajax = {
    getPage: Mock.mock({
      'KEY': '哈哈哈哈',
      'list|10': [{
        'data': '哈哈，这是一个测试的列表'
      }],
      "pageNumber|1": [1, 2, 3]
    })
  }

  function upCallback() {
    setTimeout(() => {
      let data = ajax.getPage;
      console.log(data);
      if (data.pageNumber >= 3) {
        mescroll.endUpScroll()
      }
      var res = template('test', data);
      $('ul').append(res)
      mescroll.endByPage({
        dataSize: 10,
        totalPage: 10
      });
    }, 1000);
  }

  function downCallback() {
    setTimeout(() => {
      let data = ajax.getPage;
      var res = template('test', data);
      console.log(data, $('ul'));
      $('ul').html(res)
      mescroll.endByPage({
        dataSize: 10,
        totalPage: 10
      });
    }, 1000);
  }

  var mescroll = new MeScroll("mescroll", { //第一个参数"mescroll"对应上面布局结构div的id (1.3.5版本支持传入dom对象)
    //如果您的下拉刷新是重置列表数据,那么down完全可以不用配置,具体用法参考第一个基础案例
    //解析: down.callback默认调用mescroll.resetUpScroll(),而resetUpScroll会将page.num=1,再触发up.callback
    down: {
      auto: false,
      callback: downCallback, //下拉刷新的回调,别写成downCallback(),多了括号就自动执行方法了
    },
    up: {
      auto: true,
      callback: upCallback, //上拉加载的回调
    }
  });

  var obj = {
    yi() {
      return 2
    },
    er() {
      var yi = obj.yi()
      console.log(yi);
    }
  }
  obj.er()
</script>

</html>